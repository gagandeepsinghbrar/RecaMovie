var myjson = [
        {
                "Name":"Zootopia",
                "movieId":152081,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BOTMyMjEyNzIzMV5BMl5BanBnXkFtZTgwNzIyNjU0NzE@._V1_SX300.jpg"
        },
        {
                "Name":"Up",
                "movieId":68954,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTk3NDE2NzI4NF5BMl5BanBnXkFtZTgwNzE1MzEyMTE@._V1_SX300.jpg"
        },
        {
                "Name":"Star Wars: Episode VII - The Force Awakens",
                "movieId":122886,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BOTAzODEzNDAzMl5BMl5BanBnXkFtZTgwMDU1MTgzNzE@._V1_SY1000_CR0,0,677,1000_AL_.jpg"
        },
        {
                "Name":"Deadpool",
                "movieId":122904,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMjQyODg5Njc4N15BMl5BanBnXkFtZTgwMzExMjE3NzE@._V1_SX300.jpg"
        },
        {
                "Name":"Fifty Shades of Grey",
                "movieId":125916,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMjE1MTM4NDAzOF5BMl5BanBnXkFtZTgwNTMwNjI0MzE@._V1_SX300.jpg"
        },
        {
                "Name":"The 40-Year-Old Virgin",
                "movieId":35836,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTU5MzU2MzY2Nl5BMl5BanBnXkFtZTgwOTM4NzMxMDE@._V1_SX300.jpg"
        },
        {
                "Name":"The Lord of the Rings: The Fellowship of the Ring",
                "movieId":4993,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BN2EyZjM3NzUtNWUzMi00MTgxLWI0NTctMzY4M2VlOTdjZWRiXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_SX300.jpg"
        },
        {
                "Name":"Ghostbusters",
                "movieId":2716,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTkxMjYyNzgwMl5BMl5BanBnXkFtZTgwMTE3MjYyMTE@._V1_SX300.jpg"
        },
        {
                "Name":"The Princess Bride",
                "movieId":1197,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMGM4M2Q5N2MtNThkZS00NTc1LTk1NTItNWEyZjJjNDRmNDk5XkEyXkFqcGdeQXVyMjA0MDQ0Mjc@._V1_SX300.jpg"
        },
        {
                "Name":"Raiders of the Lost Ark",
                "movieId":1198,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMjA0ODEzMTc1Nl5BMl5BanBnXkFtZTcwODM2MjAxNA@@._V1_SX300.jpg"
        },
        {
                "Name":"Mad Max: Fury Road",
                "movieId":122882,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTUyMTE0ODcxNF5BMl5BanBnXkFtZTgwODE4NDQzNTE@._V1_SX300.jpg"
        },
        {
                "Name":"Inside Out",
                "movieId":134853,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BOTgxMDQwMDk0OF5BMl5BanBnXkFtZTgwNjU5OTg2NDE@._V1_SX300.jpg"
        },
        {
                "Name":"Snow White and the Seven Dwarfs",
                "movieId":594,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTQwMzE2Mzc4M15BMl5BanBnXkFtZTcwMTE4NTc1Nw@@._V1_SX300.jpg"
        },
        {
                "Name":"Toy Story",
                "movieId":1,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMDU2ZWJlMjktMTRhMy00ZTA5LWEzNDgtYmNmZTEwZTViZWJkXkEyXkFqcGdeQXVyNDQ2OTk4MzI@._V1_SX300.jpg"
        },
        {
                "Name":"The LEGO Movie",
                "movieId":108932,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTg4MDk1ODExN15BMl5BanBnXkFtZTgwNzIyNjg3MDE@._V1_SX300.jpg"
        },
        {
                "Name":"The Wizard of Oz",
                "movieId":919,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BNjUyMTc4MDExMV5BMl5BanBnXkFtZTgwNDg0NDIwMjE@._V1_SX300.jpg"
        },
        {
                "Name":"Psycho",
                "movieId":1219,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BOWQ0MjRmZmUtY2Q2Yi00ODcxLWE4NGMtMTNjMDY1YmUzMjVkXkEyXkFqcGdeQXVyNjc1NTYyMjg@._V1_SX300.jpg"
        },
        {
                "Name":"Seven Samurai",
                "movieId":2019,
                "URL":"https://www.gstatic.com/tv/thumb/movieposters/5588/p5588_p_v8_au.jpg"
        },
        {
                "Name":"Monty Python and the Holy Grail",
                "movieId":1136,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BNmNmZjViNTQtNDQ5Mi00MDYzLWI5YWMtNDUyZGNmMGZhNDg4XkEyXkFqcGdeQXVyNTA4NzY1MzY@._V1_SX300.jpg"
        },
        {
                "Name":"True Grit",
                "movieId":82459,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMjIxNjAzODQ0N15BMl5BanBnXkFtZTcwODY2MjMyNA@@._V1_SX300.jpg"
        },
        {
                "Name":"Django Unchained",
                "movieId":99114,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMjIyNTQ5NjQ1OV5BMl5BanBnXkFtZTcwODg1MDU4OA@@._V1_SX300.jpg"
        },
        {
                "Name":"The Godfather",
                "movieId":858,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BZTRmNjQ1ZDYtNDgzMy00OGE0LWE4N2YtNTkzNWQ5ZDhlNGJmL2ltYWdlL2ltYWdlXkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg"
        },
        {
                "Name":"Airplane",
                "movieId":2791,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BZDU5MjY1NzItMThjOC00ZTBmLWJmOTMtMTUxNGY3YTM5NGQyXkEyXkFqcGdeQXVyNTAyODkwOQ@@._V1_SX300.jpg"
        },
        {
                "Name":"Amadeus",
                "movieId":1225,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTg5NDkwMTk5N15BMl5BanBnXkFtZTYwODg3MDk2._V1_SX300.jpg"
        },
        {
                "Name":"Monsters, Inc.",
                "movieId":4886,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTY1NTI0ODUyOF5BMl5BanBnXkFtZTgwNTEyNjQ0MDE@._V1_SX300.jpg"
        },
        {
                "Name":"The Dark Knight",
                "movieId":58559,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_SX300.jpg"
        },
        {
                "Name":"Fight Club",
                "movieId":2959,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BZGY5Y2RjMmItNDg5Yy00NjUwLThjMTEtNDc2OGUzNTBiYmM1XkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg"
        },
        {
                "Name":"Inception",
                "movieId":79132,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg"
        },
        {
                "Name":"Saving Private Ryan",
                "movieId":2028,
                "URL":"https://images-na.ssl-images-amazon.com/images/M/MV5BZjhkMDM4MWItZTVjOC00ZDRhLThmYTAtM2I5NzBmNmNlMzI1XkEyXkFqcGdeQXVyNDYyMDk5MTU@._V1_SX300.jpg"
        }
];

$(document).ready(function () {
        var counter = 0;
        var rated = 0;

        $('img').each(function (index) {
                $(this).attr('src', myjson[counter].URL).fadeIn(400);
                $(this).attr('movie', myjson[counter++].movieId);
        });

        $('img').click(function () {
                $(this).attr('src', myjson[counter].URL).fadeIn(400);
                $(this).attr('movie', myjson[counter++].movieId);
        });

        $('label').click(function () {
                let rate = $(this).next().val();

                $(this).parents().eq(3).children().eq(0).children().eq(0).fadeOut(400, function () {
                        let movie = $(this).attr('movie');

                        $(this).attr('src', myjson[counter].URL);
                        $(this).attr('movie', myjson[counter++].movieId);

                        var data = {
                                movieId: movie,
                                rating: rate
                        };
                        $.ajax({
                                url: '/ajax-rate',
                                data: data,
                                type: 'POST',
                                success: function (response) {
                                        response = JSON.parse(response);

                                        if (response.status) {
                                                console.log('System:', 'Rate success');
                                                ++rated;
                                        } else {
                                                console.log('System:', 'Rate failed');
                                        }
                                },
                                error: function (error) {
                                        console.log('System:', error);
                                }
                        });
                }).fadeIn(400);
        });

        $('.btn-success').click(function () {
                if (rated >= 10) {
                        window.location = '/recommendations?run=true';
                }
        });
});
